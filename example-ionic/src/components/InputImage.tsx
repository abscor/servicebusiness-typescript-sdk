// A simple input image component with preview and remove button
// Props:
// - label: string
// - value: string
// - onChange: function
// - required: boolean
// - placeholder: string
// - disabled: boolean
// - preview: boolean
// - previewWidth: string
// - previewHeight: string
// - previewStyle: any
// - previewClass: string
// - previewLabel: string
// - removeLabel: string
// - removeButton: boolean
// - removeButtonStyle: any
// - removeButtonClass: string
// - removeButtonLabel: string
// - removeButtonIcon: any

import React from 'react';
import { IonItem, IonLabel, IonImg, IonButton } from '@ionic/react';

const defaultImage = 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/4gfISUNDX1BST0ZJTEUAAQEAAAe4YXBwbAIgAABtbnRyR1JBWVhZWiAH0AACAA4ADAAAAABhY3NwQVBQTAAAAABub25lAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWFwcGwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVkZXNjAAAAwAAAAG9kc2NtAAABMAAABixjcHJ0AAAHXAAAADh3dHB0AAAHlAAAABRrVFJDAAAHqAAAAA5kZXNjAAAAAAAAABVHZW5lcmljIEdyYXkgUHJvZmlsZQAAAAAAAAAAAAAAFUdlbmVyaWMgR3JheSBQcm9maWxlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAbWx1YwAAAAAAAAAeAAAADHNrU0sAAAAqAAABeGhySFIAAAA6AAABomNhRVMAAAAsAAAB3HB0QlIAAAAqAAACCHVrVUEAAAAsAAACMmZyRlUAAAAqAAACXnpoVFcAAAAQAAACiGl0SVQAAAAuAAACmG5iTk8AAAAsAAACxmtvS1IAAAAYAAAC8mNzQ1oAAAAkAAADCmhlSUwAAAAgAAADLmRlREUAAAA6AAADTmh1SFUAAAAuAAADiHN2U0UAAAAuAAADtnpoQ04AAAAQAAAD5GphSlAAAAAWAAAD9HJvUk8AAAAiAAAECmVsR1IAAAAkAAAELHB0UE8AAAA4AAAEUG5sTkwAAAAqAAAEiGVzRVMAAAAoAAAEsnRoVEgAAAAkAAAE2nRyVFIAAAAiAAAE/mZpRkkAAAAsAAAFIHBsUEwAAAA2AAAFTHJ1UlUAAAAmAAAFgmFyRUcAAAAoAAAFqGVuVVMAAAAoAAAF0GRhREsAAAA0AAAF+ABWAWEAZQBvAGIAZQBjAG4A/QAgAHMAaQB2AP0AIABwAHIAbwBmAGkAbABHAGUAbgBlAHIAaQENAGsAaQAgAHAAcgBvAGYAaQBsACAAcwBpAHYAaQBoACAAdABvAG4AbwB2AGEAUABlAHIAZgBpAGwAIABkAGUAIABnAHIAaQBzACAAZwBlAG4A6AByAGkAYwBQAGUAcgBmAGkAbAAgAEMAaQBuAHoAYQAgAEcAZQBuAOkAcgBpAGMAbwQXBDAEMwQwBDsETAQ9BDgEOQAgBD8EQAQ+BEQEMAQ5BDsAIABHAHIAYQB5AFAAcgBvAGYAaQBsACAAZwDpAG4A6QByAGkAcQB1AGUAIABnAHIAaQBzkBp1KHBwlo6Ccl9pY8+P8ABQAHIAbwBmAGkAbABvACAAZwByAGkAZwBpAG8AIABnAGUAbgBlAHIAaQBjAG8ARwBlAG4AZQByAGkAcwBrACAAZwByAOUAdABvAG4AZQBwAHIAbwBmAGkAbMd8vBgAIABHAHIAYQB5ACDVBLhc0wzHfABPAGIAZQBjAG4A/QAgAWEAZQBkAP0AIABwAHIAbwBmAGkAbAXkBegF1QXkBdkF3AAgAEcAcgBhAHkAIAXbBdwF3AXZAEEAbABsAGcAZQBtAGUAaQBuAGUAcwAgAEcAcgBhAHUAcwB0AHUAZgBlAG4ALQBQAHIAbwBmAGkAbADBAGwAdABhAGwA4QBuAG8AcwAgAHMAegD8AHIAawBlACAAcAByAG8AZgBpAGwARwBlAG4AZQByAGkAcwBrACAAZwByAOUAcwBrAGEAbABlAHAAcgBvAGYAaQBsZm6QGnBwXqZjz4/wZYdO9k4AgiwwsDDsMKQw1zDtMNUwoTCkMOsAUAByAG8AZgBpAGwAIABnAHIAaQAgAGcAZQBuAGUAcgBpA5MDtQO9A7kDugPMACADwAPBA78DxgOvA7sAIAOzA7oDwQO5AFAAZQByAGYAaQBsACAAZwBlAG4A6QByAGkAYwBvACAAZABlACAAYwBpAG4AegBlAG4AdABvAHMAQQBsAGcAZQBtAGUAZQBuACAAZwByAGkAagBzAHAAcgBvAGYAaQBlAGwAUABlAHIAZgBpAGwAIABnAHIAaQBzACAAZwBlAG4A6QByAGkAYwBvDkIOGw4jDkQOHw4lDkwOKg41DkAOFw4yDhcOMQ5IDicORA4bAEcAZQBuAGUAbAAgAEcAcgBpACAAUAByAG8AZgBpAGwAaQBZAGwAZQBpAG4AZQBuACAAaABhAHIAbQBhAGEAcAByAG8AZgBpAGkAbABpAFUAbgBpAHcAZQByAHMAYQBsAG4AeQAgAHAAcgBvAGYAaQBsACAAcwB6AGEAcgBvAVsAYwBpBB4EMQRJBDgEOQAgBEEENQRABEsEOQAgBD8EQAQ+BEQEOAQ7BEwGRQZEBkEAIAYq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';

interface ContainerProps {
  label: string;
  value: string;
  onChange: any;
  required?: boolean;  
  removeButtonLabel?: string;
  previewWidth?: string;
  previewHeight?: string;
}

const InputImage: React.FC<ContainerProps> = ({ label, value, onChange, removeButtonLabel, previewWidth }) => {
  return (
    <IonItem onClick={() => {
        const input = document.querySelector('input[type="file"]') as HTMLInputElement;
        if (input) {
            input.click();
        }
    } }
    style={{
        cursor: 'pointer'
    
    }}>
        <input style={{
            display: 'none'
        }} type="file" accept="image/*" onChange={(e: React.ChangeEvent<HTMLInputElement>) => {
            const file = e.target.files?.[0];
            if (file) {
                const reader = new FileReader();
                reader.onloadend = () => {
                    onChange(reader.result as string);
                };
                reader.readAsDataURL(file);
            }
        }} />
        <IonLabel position="floating">{label}</IonLabel>
      <IonImg src={
        value || defaultImage
    } style={{
        width: previewWidth ? previewWidth : '100px',
        height: previewWidth ? previewWidth : '100px',
        marginTop: '30px',
        marginBottom: '10px',
      }} />
      {value ? (<IonButton onClick={(e) => {
          e.preventDefault();
          e.stopPropagation();
          onChange('');
        
        }} fill="clear" color="danger" style={{
          position: 'absolute',
          top: '0',
          right: '0',
        }}>
        {removeButtonLabel || 'Remove'}
      </IonButton>) : null}
    </IonItem>
  );
};

export default InputImage;